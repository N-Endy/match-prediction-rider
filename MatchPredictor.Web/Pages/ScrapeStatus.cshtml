@page
@using System.Globalization
@model MatchPredictor.Web.Pages.ScrapeStatus

@{
    ViewData["Title"] = "System Status";
}

<div class="mp-container">
    <div class="mp-page-header">
        <div class="mp-page-title">
            <div class="mp-page-title-icon" style="background: rgba(6, 182, 212, 0.1);">ðŸ“„</div>
            <h1>System Status</h1>
        </div>
    </div>

    @if (Model.Logs?.Any() == true)
    {
        <div class="mp-match-count">
            <span class="mp-live-dot"></span>
            @Model.Logs.Count() log entries
        </div>

        <div class="mp-predictions-list">
            @foreach (var status in Model.Logs)
            {
                var isSuccess = status.Status.ToLower() == "success";
                <div class="mp-prediction-card" style="border-left: 3px solid @(isSuccess ? "var(--accent-emerald)" : "var(--accent-rose)");">
                    <div class="mp-match-info">
                        <div class="mp-match-league">
                            Scrape Attempt
                            <span class="mp-time">@status.Timestamp.ToLocalTime().ToString("dd MMM yyyy, hh:mm tt", CultureInfo.InvariantCulture)</span>
                        </div>
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 4px;">
                            @status.Message
                        </div>
                    </div>
                    <span class="mp-prediction-badge" style="background: @(isSuccess ? "rgba(16,185,129,0.12)" : "rgba(244,63,94,0.12)"); color: @(isSuccess ? "var(--accent-emerald)" : "var(--accent-rose)"); border: 1px solid @(isSuccess ? "rgba(16,185,129,0.2)" : "rgba(244,63,94,0.2)");">
                        @status.Status
                    </span>
                </div>
            }
        </div>
    }
    else
    {
        <div class="mp-empty-state">
            <div class="mp-empty-state-icon">ðŸ“„</div>
            <p>No scraping logs available yet.</p>
        </div>
    }
</div>
